-- Extra views and partitioning for the Indigo DataCloud APEL server.
-- -----------------------------------------------------------------------------

-- Partitioning for CloudRecords to aid query performance and monthly deletions

ALTER TABLE CloudRecords
PARTITION BY RANGE (TO_DAYS(StartTime)) (
PARTITION p2012_12 VALUES LESS THAN (TO_DAYS('2013-01-01')),
PARTITION p2013_01 VALUES LESS THAN (TO_DAYS('2013-02-01')),
PARTITION p2013_02 VALUES LESS THAN (TO_DAYS('2013-03-01')),
PARTITION p2013_03 VALUES LESS THAN (TO_DAYS('2013-04-01')),
PARTITION p2013_04 VALUES LESS THAN (TO_DAYS('2013-05-01')),
PARTITION p2013_05 VALUES LESS THAN (TO_DAYS('2013-06-01')),
PARTITION p2013_06 VALUES LESS THAN (TO_DAYS('2013-07-01')),
PARTITION p2013_07 VALUES LESS THAN (TO_DAYS('2013-08-01')),
PARTITION p2013_08 VALUES LESS THAN (TO_DAYS('2013-09-01')),
PARTITION p2013_09 VALUES LESS THAN (TO_DAYS('2013-10-01')),
PARTITION p2013_10 VALUES LESS THAN (TO_DAYS('2013-11-01')),
PARTITION p2013_11 VALUES LESS THAN (TO_DAYS('2013-12-01')),
PARTITION p2013_12 VALUES LESS THAN (TO_DAYS('2014-01-01')),
PARTITION p2014_01 VALUES LESS THAN (TO_DAYS('2014-02-01')),
PARTITION p2014_02 VALUES LESS THAN (TO_DAYS('2014-03-01')),
PARTITION p2014_03 VALUES LESS THAN (TO_DAYS('2014-04-01')),
PARTITION p2014_04 VALUES LESS THAN (TO_DAYS('2014-05-01')),
PARTITION p2014_05 VALUES LESS THAN (TO_DAYS('2014-06-01')),
PARTITION p2014_06 VALUES LESS THAN (TO_DAYS('2014-07-01')),
PARTITION p2014_07 VALUES LESS THAN (TO_DAYS('2014-08-01')),
PARTITION p2014_08 VALUES LESS THAN (TO_DAYS('2014-09-01')),
PARTITION p2014_09 VALUES LESS THAN (TO_DAYS('2014-10-01')),
PARTITION p2014_10 VALUES LESS THAN (TO_DAYS('2014-11-01')),
PARTITION p2014_11 VALUES LESS THAN (TO_DAYS('2014-12-01')),
PARTITION p2014_12 VALUES LESS THAN (TO_DAYS('2015-01-01')),
PARTITION p2015_01 VALUES LESS THAN (TO_DAYS('2015-02-01')),
PARTITION p2015_02 VALUES LESS THAN (TO_DAYS('2015-03-01')),
PARTITION p2015_03 VALUES LESS THAN (TO_DAYS('2015-04-01')),
PARTITION p2015_04 VALUES LESS THAN (TO_DAYS('2015-05-01')),
PARTITION p2015_05 VALUES LESS THAN (TO_DAYS('2015-06-01')),
PARTITION p2015_06 VALUES LESS THAN (TO_DAYS('2015-07-01')),
PARTITION p2015_07 VALUES LESS THAN (TO_DAYS('2015-08-01')),
PARTITION p2015_08 VALUES LESS THAN (TO_DAYS('2015-09-01')),
PARTITION p2015_09 VALUES LESS THAN (TO_DAYS('2015-10-01')),
PARTITION p2015_10 VALUES LESS THAN (TO_DAYS('2015-11-01')),
PARTITION p2015_11 VALUES LESS THAN (TO_DAYS('2015-12-01')),
PARTITION p2015_12 VALUES LESS THAN (TO_DAYS('2016-01-01')),
PARTITION p2016_01 VALUES LESS THAN (TO_DAYS('2016-02-01')),
PARTITION p2016_02 VALUES LESS THAN (TO_DAYS('2016-03-01')),
PARTITION p2016_03 VALUES LESS THAN (TO_DAYS('2016-04-01')),
PARTITION p2016_04 VALUES LESS THAN (TO_DAYS('2016-05-01')),
PARTITION p2016_05 VALUES LESS THAN (TO_DAYS('2016-06-01')),
PARTITION p2016_06 VALUES LESS THAN (TO_DAYS('2016-07-01')),
PARTITION p2016_07 VALUES LESS THAN (TO_DAYS('2016-08-01')),
PARTITION p2016_08 VALUES LESS THAN (TO_DAYS('2016-09-01')),
PARTITION p2016_09 VALUES LESS THAN (TO_DAYS('2016-10-01')),
PARTITION p2016_10 VALUES LESS THAN (TO_DAYS('2016-11-01')),
PARTITION p2016_11 VALUES LESS THAN (TO_DAYS('2016-12-01')),
PARTITION p2017_01 VALUES LESS THAN (TO_DAYS('2017-01-01')),
PARTITION p2017_02 VALUES LESS THAN (TO_DAYS('2017-02-01')),
PARTITION p2017_03 VALUES LESS THAN (TO_DAYS('2017-03-01')),
PARTITION p2017_04 VALUES LESS THAN (TO_DAYS('2017-04-01')),
PARTITION p2017_05 VALUES LESS THAN (TO_DAYS('2017-05-01')),
PARTITION p2017_06 VALUES LESS THAN (TO_DAYS('2017-06-01')),
PARTITION p2017_07 VALUES LESS THAN (TO_DAYS('2017-07-01')),
PARTITION p2017_08 VALUES LESS THAN (TO_DAYS('2017-08-01')),
PARTITION p2017_09 VALUES LESS THAN (TO_DAYS('2017-09-01')),
PARTITION p2017_10 VALUES LESS THAN (TO_DAYS('2017-10-01')),
PARTITION p2017_11 VALUES LESS THAN (TO_DAYS('2017-11-01')),
PARTITION p2017_12 VALUES LESS THAN (TO_DAYS('2017-12-01')),
PARTITION pDefault VALUES LESS THAN MAXVALUE
);
